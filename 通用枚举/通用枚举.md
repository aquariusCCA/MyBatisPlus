---
up:
  - "[[MyBatis Plus 課程描述]]"
---
> 表中的有些字段值是固定的，例如性别（男或女），此时我们可以使用 MyBatis -Plus 的通用枚举来实现

# 1. 数据库表添加字段 sex

![[image-20230729180540539.png]]

---

# 2. 创建通用枚举类型

```java
package com.codechenxi.mybatis_plus.enums;

import com.baomidou.mybatisplus.annotation.EnumValue;

public enum SexEnum {
    MALE(1,"男"),
    FEMALE(2,"女");


    @EnumValue //将注解所标识的属性的值存储到数据库中
    private Integer sex;
    private String sexName;

    SexEnum(Integer sex, String sexName) {
        this.sex = sex;
        this.sexName = sexName;
    }
}
```

---

# 3. 补充实体类信息

```java
package com.codechenxi.mybatis_plus.entity;  
  
import com.baomidou.mybatisplus.annotation.TableField;  
import com.baomidou.mybatisplus.annotation.TableId;  
import com.baomidou.mybatisplus.annotation.TableLogic;  
import com.codechenxi.mybatis_plus.enums.SexEnum;  
import lombok.Data;  
  
@Data  
public class User {  
    @TableId(value = "uid")  
    private Long id;  
    @TableField("username")  
    private String name;  
    private Long age;  
    private String email;  
    private SexEnum sex;  
    @TableLogic  
    private Integer isDeleted;  
}
```

---

## 4. 测试

```java
package com.codechenxi.mybatis_plus;

import com.codechenxi.mybatis_plus.entity.User;
import com.codechenxi.mybatis_plus.enums.SexEnum;
import com.codechenxi.mybatis_plus.mapper.UserMapper;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
public class EnumsTest {
    @Autowired
    private UserMapper userMapper;

    @Test
    public void testSexEnum() {
        User user = new User();
        user.setName("Enum");
        user.setAge(20L);
        //设置性别信息为枚举项，会将@EnumValue注解所标识的属性值存储到数据库
        user.setSex(SexEnum.MALE);
        // INSERT INTO t_user ( username, age, sex ) VALUES ( ?, ?, ? )
        // Parameters: Enum(String), 20(Integer), 1(Integer)
        int result = userMapper.insert(user);
        System.out.println("影响行数：" + result);
    }
}

```

---

# 5. 运行结果

![[image-20230729181453334.png]]

![[image-20230729181333324.png]]

---